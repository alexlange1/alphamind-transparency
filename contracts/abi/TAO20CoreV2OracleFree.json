[
  {
    "type": "constructor",
    "inputs": [
      {"name": "_stakingManager", "type": "address"},
      {"name": "_navCalculator", "type": "address"},
      {"name": "_tokenName", "type": "string"},
      {"name": "_tokenSymbol", "type": "string"}
    ]
  },
  {
    "type": "function",
    "name": "mintTAO20",
    "inputs": [
      {
        "name": "request",
        "type": "tuple",
        "components": [
          {"name": "recipient", "type": "address"},
          {
            "name": "deposit",
            "type": "tuple",
            "components": [
              {"name": "blockHash", "type": "bytes32"},
              {"name": "extrinsicIndex", "type": "uint32"},
              {"name": "userSS58", "type": "bytes32"},
              {"name": "netuid", "type": "uint16"},
              {"name": "amount", "type": "uint256"},
              {"name": "timestamp", "type": "uint256"}
            ]
          },
          {"name": "nonce", "type": "uint256"},
          {"name": "deadline", "type": "uint256"}
        ]
      },
      {"name": "signature", "type": "bytes"}
    ],
    "outputs": [],
    "stateMutability": "nonpayable"
  },
  {
    "type": "function",
    "name": "redeemTAO20",
    "inputs": [
      {"name": "amount", "type": "uint256"}
    ],
    "outputs": [],
    "stateMutability": "nonpayable"
  },
  {
    "type": "function",
    "name": "getMinerStats",
    "inputs": [
      {"name": "miner", "type": "address"}
    ],
    "outputs": [
      {
        "name": "",
        "type": "tuple",
        "components": [
          {"name": "volumeStaked", "type": "uint256"},
          {"name": "volumeRedeemed", "type": "uint256"},
          {"name": "totalVolume", "type": "uint256"},
          {"name": "transactionCount", "type": "uint256"},
          {"name": "lastActivity", "type": "uint256"},
          {"name": "currentEpochVolume", "type": "uint256"}
        ]
      }
    ],
    "stateMutability": "view"
  },
  {
    "type": "function",
    "name": "getEpochMinerVolume",
    "inputs": [
      {"name": "epoch", "type": "uint256"},
      {"name": "miner", "type": "address"}
    ],
    "outputs": [
      {"name": "", "type": "uint256"}
    ],
    "stateMutability": "view"
  },
  {
    "type": "function",
    "name": "getActiveMiners",
    "inputs": [],
    "outputs": [
      {"name": "", "type": "address[]"}
    ],
    "stateMutability": "view"
  },
  {
    "type": "function",
    "name": "getEpochInfo",
    "inputs": [],
    "outputs": [
      {"name": "epoch", "type": "uint256"},
      {"name": "startTime", "type": "uint256"},
      {"name": "endTime", "type": "uint256"},
      {"name": "remainingTime", "type": "uint256"}
    ],
    "stateMutability": "view"
  },
  {
    "type": "function",
    "name": "getSystemStats",
    "inputs": [],
    "outputs": [
      {"name": "totalVolume", "type": "uint256"},
      {"name": "totalTransactions", "type": "uint256"},
      {"name": "activeMinersCount", "type": "uint256"},
      {"name": "currentNAV", "type": "uint256"},
      {"name": "totalSupply", "type": "uint256"}
    ],
    "stateMutability": "view"
  },
  {
    "type": "function",
    "name": "getCurrentNAV",
    "inputs": [],
    "outputs": [
      {"name": "", "type": "uint256"}
    ],
    "stateMutability": "view"
  },
  {
    "type": "function",
    "name": "updateNAV",
    "inputs": [],
    "outputs": [
      {"name": "", "type": "uint256"}
    ],
    "stateMutability": "nonpayable"
  },
  {
    "type": "function",
    "name": "advanceEpoch",
    "inputs": [],
    "outputs": [],
    "stateMutability": "nonpayable"
  },
  {
    "type": "function",
    "name": "needsNAVUpdate",
    "inputs": [],
    "outputs": [
      {"name": "", "type": "bool"}
    ],
    "stateMutability": "view"
  },
  {
    "type": "function",
    "name": "getNAVDetails",
    "inputs": [],
    "outputs": [
      {"name": "currentNAV", "type": "uint256"},
      {"name": "totalValue", "type": "uint256"},
      {"name": "totalEmissions", "type": "uint256"},
      {"name": "totalRewards", "type": "uint256"},
      {"name": "isEmissionWeighted", "type": "bool"},
      {"name": "lastUpdate", "type": "uint256"}
    ],
    "stateMutability": "view"
  },
  {
    "type": "event",
    "name": "TAO20Minted",
    "inputs": [
      {"name": "recipient", "type": "address", "indexed": true},
      {"name": "miner", "type": "address", "indexed": true},
      {"name": "tao20Amount", "type": "uint256", "indexed": false},
      {"name": "depositAmount", "type": "uint256", "indexed": false},
      {"name": "netuid", "type": "uint16", "indexed": true},
      {"name": "nav", "type": "uint256", "indexed": false},
      {"name": "depositId", "type": "bytes32", "indexed": false}
    ]
  },
  {
    "type": "event",
    "name": "TAO20Redeemed",
    "inputs": [
      {"name": "user", "type": "address", "indexed": true},
      {"name": "miner", "type": "address", "indexed": true},
      {"name": "tao20Amount", "type": "uint256", "indexed": false},
      {"name": "totalValue", "type": "uint256", "indexed": false},
      {"name": "nav", "type": "uint256", "indexed": false}
    ]
  },
  {
    "type": "event",
    "name": "MinerActivityTracked",
    "inputs": [
      {"name": "miner", "type": "address", "indexed": true},
      {"name": "amount", "type": "uint256", "indexed": false},
      {"name": "isMint", "type": "bool", "indexed": false},
      {"name": "timestamp", "type": "uint256", "indexed": false},
      {"name": "cumulativeVolume", "type": "uint256", "indexed": false},
      {"name": "epochVolume", "type": "uint256", "indexed": false}
    ]
  },
  {
    "type": "event",
    "name": "NAVUpdated",
    "inputs": [
      {"name": "currentNAV", "type": "uint256", "indexed": false},
      {"name": "totalSupply", "type": "uint256", "indexed": false},
      {"name": "totalValue", "type": "uint256", "indexed": false},
      {"name": "timestamp", "type": "uint256", "indexed": false}
    ]
  },
  {
    "type": "event",
    "name": "EpochAdvanced",
    "inputs": [
      {"name": "oldEpoch", "type": "uint256", "indexed": false},
      {"name": "newEpoch", "type": "uint256", "indexed": false},
      {"name": "timestamp", "type": "uint256", "indexed": false}
    ]
  },
  {
    "type": "event",
    "name": "NewMinerRegistered",
    "inputs": [
      {"name": "miner", "type": "address", "indexed": true},
      {"name": "timestamp", "type": "uint256", "indexed": false}
    ]
  }
]
